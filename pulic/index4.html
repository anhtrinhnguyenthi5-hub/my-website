<!doctype html>
<html lang="ja" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‰ø≥Âè•„Ç∞„É©„É† - Haiku</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    .post-card {
      transition: box-shadow 0.1s;
    }
    
    .like-button {
      transition: transform 0.1s;
    }
    
    .like-button:active {
      transform: scale(0.85);
    }
    
    .icon-button:hover {
      opacity: 0.6;
    }
    
    .leaderboard-item:hover {
      background-color: #fafafa;
    }
    
    .story-ring {
      background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
      padding: 2px;
      border-radius: 50%;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app" class="h-full w-full"></div>
  <script>
    const defaultConfig = {
      background_color: "#fafafa",
      surface_color: "#ffffff",
      text_color: "#262626",
      primary_action_color: "#0095f6",
      secondary_action_color: "#262626",
      site_title: "‰ø≥Âè•„Ç∞„É©„É†",
      leaderboard_title: "„Åä„Åô„Åô„ÇÅ",
      font_family: "-apple-system",
      font_size: 14
    };

    let config = { ...defaultConfig };

    const haikuPosts = [
      {
        id: 1,
        author: "shizen_shi",
        displayName: "Ëá™ÁÑ∂Ë©©‰∫∫",
        avatar: "üå∏",
        haikuLines: [
          "Ê°ú„ÅÆËä±",        // 5Èü≥
          "Êò•È¢®„Å´Ëàû„ÅÑËêΩ„Å°„Å¶",  // 7Èü≥
          "Êò•„ÅåÊù•„Åü"        // 5Èü≥
        ],
        caption: "Êò•„ÅåË®™„Çå„ÄÅÊ°ú„ÅÆËä±„Å≥„Çâ„ÅåÈ¢®„Å´Ëàû„ÅÜÁæé„Åó„ÅÑÂ≠£ÁØÄ„Åß„Åô üå∏",
        likes: 234,
        comments: 12,
        timestamp: "2ÊôÇÈñìÂâç",
        gradient: "linear-gradient(135deg, #667eea 0%, #764ba2 100%)",
        location: "‰∫¨ÈÉΩ"
      },
      {
        id: 2,
        author: "tsuki_akari",
        displayName: "Êúà„ÅÆÂÖâ",
        avatar: "üéã",
        haikuLines: [
          "Ê∫ÄÊúàÂÖâ",
          "Èùô„Åã„Å™Êπñ„Å´Êò†„Çä",
          "Â§ú„ÅØÈùô„Åã"
        ],
        caption: "Ê∫ÄÊúà„ÅÆÂÖâ„ÅåÈùô„Åã„Å™ÊπñÈù¢„Å´Êò†„Çä„ÄÅÁæé„Åó„ÅÑÂ§ú„ÅÆÈ¢®ÊôØ üåô",
        likes: 189,
        comments: 8,
        timestamp: "5ÊôÇÈñìÂâç",
        gradient: "linear-gradient(135deg, #f093fb 0%, #f5576c 100%)",
        location: "ÁÆ±Ê†π"
      },
      {
        id: 3,
        author: "aki_kaze",
        displayName: "ÁßãÈ¢®",
        avatar: "üçÇ",
        haikuLines: [
          "ÈªÑËëâÊï£„Çã",
          "ÁßãÈ¢®„ÅåÈÅã„Å∂ÊÄù„ÅÑÂá∫",
          "ÂøÉÂØÇ„Åó„ÅÑ"
        ],
        caption: "Áßã„ÅåË®™„Çå„ÄÅÈªÑËëâ„ÅåËàû„ÅÑÊï£„Çä„ÄÅÂøÉ„Å´ÂØÇ„Åó„Åï„ÇíÊÑü„Åò„Åæ„Åô üçÇ",
        likes: 312,
        comments: 15,
        timestamp: "1Êó•Ââç",
        gradient: "linear-gradient(135deg, #fa709a 0%, #fee140 100%)",
        location: "Â•àËâØ"
      },
      {
        id: 4,
        author: "umi_nami",
        displayName: "Êµ∑„ÅÆÊ≥¢",
        avatar: "‚õ∞Ô∏è",
        haikuLines: [
          "Ê≥¢Êâì„Å§Èü≥",
          "Èùí„ÅÑÊµ∑„ÅÆÂ∫É„Åå„Çä„Å´",
          "ÂøÉÂÆâ„Çâ„Åê"
        ],
        caption: "Â∫É„ÅÑÊµ∑„ÄÅÊ≥¢„ÅÆÈü≥„ÄÅÂøÉ„ÅåÁ©è„ÇÑ„Åã„Å´„Å™„Çä„Åæ„Åô üåä",
        likes: 156,
        comments: 6,
        timestamp: "1Êó•Ââç",
        gradient: "linear-gradient(135deg, #30cfd0 0%, #330867 100%)",
        location: "Ê≤ñÁ∏Ñ"
      },
      {
        id: 5,
        author: "yoru_hoshi",
        displayName: "Â§ú„ÅÆÊòü",
        avatar: "üåä",
        haikuLines: [
          "Â§úÁ©∫„ÅÆÊòü",
          "Â§©„ÅÆÂ∑ùËºù„ÅèÈÅ†„Åè",
          "Â§¢„ÅØÈÅ†„Åè"
        ],
        caption: "Â§úÁ©∫„Å´Ëºù„ÅèÊòü„ÄÖ„ÄÅÂ§©„ÅÆÂ∑ù„ÄÅÈÅ†„ÅÑÂ§¢„ÇíË¶ã„Çã üåå‚≠ê",
        likes: 278,
        comments: 11,
        timestamp: "2Êó•Ââç",
        gradient: "linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)",
        location: "Èï∑Èáé"
      },
      {
        id: 6,
        author: "shizuka_tera",
        displayName: "ÈùôÂØÇ„ÅÆÂØ∫",
        avatar: "ü¶ã",
        haikuLines: [
          "Ê∑±Â§ú„ÅÆÂØ∫",
          "Èêò„ÅÆÈü≥ÈÅ†„ÅèÈüø„ÅÑ„Å¶",
          "ÂøÉÈùô„Åæ„Çã"
        ],
        caption: "Ê∑±Â§ú„ÅÆÂØ∫„ÄÅÈÅ†„Åè„Å´Èüø„ÅèÈêò„ÅÆÈü≥„ÄÅÂøÉ„ÅåÈùô„Åæ„Çä„Åæ„Åô üîîüéê",
        likes: 201,
        comments: 9,
        timestamp: "3Êó•Ââç",
        gradient: "linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%)",
        location: "ÈéåÂÄâ"
      }
    ];

    let likedPosts = new Set();
    let savedPosts = new Set();

    function toggleLike(postId) {
      const post = haikuPosts.find(p => p.id === postId);
      if (!post) return;

      if (likedPosts.has(postId)) {
        likedPosts.delete(postId);
        post.likes--;
      } else {
        likedPosts.add(postId);
        post.likes++;
      }

      renderApp();
    }

    function toggleSave(postId) {
      if (savedPosts.has(postId)) {
        savedPosts.delete(postId);
      } else {
        savedPosts.add(postId);
      }
      renderApp();
    }

    function renderApp() {
      const baseSize = config.font_size || defaultConfig.font_size;
      const fontFamily = config.font_family || defaultConfig.font_family;
      const backgroundColor = config.background_color || defaultConfig.background_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const textColor = config.text_color || defaultConfig.text_color;
      const primaryColor = config.primary_action_color || defaultConfig.primary_action_color;
      const secondaryColor = config.secondary_action_color || defaultConfig.secondary_action_color;
      const siteTitle = config.site_title || defaultConfig.site_title;
      const leaderboardTitle = config.leaderboard_title || defaultConfig.leaderboard_title;

      const sortedPosts = [...haikuPosts].sort((a, b) => b.likes - a.likes);

      document.getElementById('app').innerHTML = `
        <div style="font-family: ${fontFamily}, 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif; background-color: ${backgroundColor}; min-height: 100%; width: 100%; overflow-auto;">
          
          <!-- Header -->
          <header style="background-color: ${surfaceColor}; border-bottom: 1px solid #dbdbdb; position: sticky; top: 0; z-index: 100; width: 100%;">
            <div style="max-width: 975px; margin: 0 auto; padding: 0 20px; height: 60px; display: flex; align-items: center; justify-content: space-between;">
              <!-- Logo -->
              <div style="flex: 1;">
                <h1 style="font-family: 'Lobster', cursive, ${fontFamily}; font-size: ${baseSize * 2}px; font-weight: 400; color: ${textColor}; margin: 0; cursor: pointer;">
                  ${siteTitle}
                </h1>
              </div>
              
              <!-- Search Bar -->
              <div style="flex: 1; display: flex; justify-content: center;">
                <div style="background-color: ${backgroundColor}; border: 1px solid #dbdbdb; border-radius: 8px; padding: 8px 16px; width: 100%; max-width: 268px; display: flex; align-items: center; gap: 12px;">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#8e8e8e" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                  </svg>
                  <input type="text" placeholder="Ê§úÁ¥¢" style="border: none; outline: none; background: transparent; font-size: ${baseSize}px; color: ${textColor}; width: 100%;" />
                </div>
              </div>
              
              <!-- Nav Icons -->
              <div style="flex: 1; display: flex; gap: 22px; justify-content: flex-end; align-items: center;">
                <button class="icon-button" style="background: none; border: none; cursor: pointer; padding: 0;">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="${textColor}" stroke-width="2">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                  </svg>
                </button>
                <button class="icon-button" style="background: none; border: none; cursor: pointer; padding: 0;">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="${textColor}" stroke-width="2">
                    <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                  </svg>
                </button>
                <button class="icon-button" style="background: none; border: none; cursor: pointer; padding: 0;">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="${textColor}" stroke-width="2">
                    <path d="M12 5v14M5 12h14"></path>
                  </svg>
                </button>
                <button class="icon-button" style="background: none; border: none; cursor: pointer; padding: 0;">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="${textColor}" stroke-width="2">
                    <path d="M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"></path>
                  </svg>
                </button>
                <button class="icon-button" style="background: none; border: none; cursor: pointer; padding: 0;">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="${textColor}" stroke-width="2">
                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                  </svg>
                </button>
                <button class="icon-button" style="background: none; border: none; cursor: pointer; padding: 0;">
                  <div style="width: 24px; height: 24px; border-radius: 50%; background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%); display: flex; align-items: center; justify-content: center;">
                    <div style="width: 20px; height: 20px; border-radius: 50%; background-color: ${surfaceColor};"></div>
                  </div>
                </button>
              </div>
            </div>
          </header>

          <!-- Main Content -->
          <div style="max-width: 1400px; margin: 0 auto; padding: 30px 20px 0; display: grid; grid-template-columns: 320px 1fr 319px; gap: 28px;">
            
            <!-- Left Sidebar - Leaderboard -->
            <aside style="position: sticky; top: 90px; height: fit-content;">
              <div style="background-color: ${surfaceColor}; border: 1px solid #dbdbdb; border-radius: 8px; padding: 20px;">
                <h2 style="font-size: ${baseSize * 1.3}px; font-weight: 700; color: ${textColor}; margin: 0 0 20px 0; display: flex; align-items: center; gap: 8px;">
                  üèÜ „Éà„ÉÉ„Éó‰ø≥Âè•
                </h2>
                
                <div style="display: flex; flex-direction: column; gap: 16px;">
                  ${sortedPosts.slice(0, 3).map((post, index) => `
                    <div style="border: ${index === 0 ? '2px solid #fbbf24' : '1px solid #dbdbdb'}; border-radius: 12px; padding: 12px; background: ${index === 0 ? '#fffbeb' : surfaceColor}; cursor: pointer; transition: transform 0.2s;" onmouseover="this.style.transform='scale(1.02)'" onmouseout="this.style.transform='scale(1)'">
                      
                      <!-- Rank Badge -->
                      <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                        <div style="font-size: ${baseSize * 2}px;">
                          ${index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : 'ü•â'}
                        </div>
                        <div style="flex: 1;">
                          <div style="font-weight: 700; font-size: ${baseSize * 0.95}px; color: ${textColor};">${post.author}</div>
                          <div style="font-size: ${baseSize * 0.8}px; color: #8e8e8e;">${post.likes} „ÅÑ„ÅÑ„Å≠</div>
                        </div>
                      </div>

                      <!-- Haiku Preview -->
                      <div style="background: ${post.gradient}; border-radius: 8px; padding: 24px 16px; display: flex; align-items: center; justify-content: flex-end; min-height: 180px; margin-bottom: 8px; position: relative;">
                        <div style="writing-mode: vertical-rl; display: flex; gap: 16px; padding-right: 24px;">
                          ${post.haikuLines.map((line, idx) => `
                            <div style="font-size: ${baseSize * 1.4}px; color: white; font-weight: 500; text-shadow: 0 2px 12px rgba(0,0,0,0.5); line-height: 1.6; display: flex; flex-direction: column; align-items: center;">
                              ${line.split('').map(char => `<span style="display: block;">${char}</span>`).join('')}
                            </div>
                          `).join('')}
                        </div>
                      </div>

                      <!-- Post Info -->
                      <div style="display: flex; align-items: center; gap: 8px;">
                        <div style="width: 24px; height: 24px; border-radius: 50%; background: ${post.gradient}; display: flex; align-items: center; justify-content: center; font-size: ${baseSize * 0.9}px;">
                          ${post.avatar}
                        </div>
                        <div style="flex: 1; min-width: 0;">
                          <div style="font-size: ${baseSize * 0.85}px; color: #8e8e8e; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                            ${post.location || post.displayName}
                          </div>
                        </div>
                        <div style="display: flex; align-items: center; gap: 4px;">
                          <svg width="14" height="14" viewBox="0 0 24 24" fill="#ed4956" stroke="#ed4956" stroke-width="2">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                          </svg>
                          <span style="font-size: ${baseSize * 0.8}px; font-weight: 600; color: ${textColor};">${post.likes}</span>
                        </div>
                      </div>
                    </div>
                  `).join('')}
                </div>

                <!-- View All -->
                <button style="width: 100%; margin-top: 16px; padding: 10px; background: none; border: 1px solid #dbdbdb; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: ${baseSize * 0.9}px; color: ${textColor}; transition: background-color 0.2s;" onmouseover="this.style.backgroundColor='${backgroundColor}'" onmouseout="this.style.backgroundColor='transparent'">
                  „Åô„Åπ„Å¶Ë¶ã„Çã
                </button>
              </div>
            </aside>

            <!-- Posts Feed -->
            <main style="max-width: 630px;">
              <!-- Stories -->
              <div style="background-color: ${surfaceColor}; border: 1px solid #dbdbdb; border-radius: 8px; padding: 16px; margin-bottom: 24px; overflow-x: auto;">
                <div style="display: flex; gap: 16px;">
                  ${haikuPosts.map(post => `
                    <div style="display: flex; flex-direction: column; align-items: center; gap: 8px; cursor: pointer; min-width: 66px;">
                      <div class="story-ring">
                        <div style="width: 56px; height: 56px; border-radius: 50%; background: ${post.gradient}; border: 3px solid ${surfaceColor}; display: flex; align-items: center; justify-content: center; font-size: ${baseSize * 2}px;">
                          ${post.avatar}
                        </div>
                      </div>
                      <span style="font-size: ${baseSize * 0.85}px; color: ${textColor}; max-width: 66px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${post.author.split('_')[0]}</span>
                    </div>
                  `).join('')}
                </div>
              </div>

              <!-- Posts -->
              ${haikuPosts.map(post => `
                <article class="post-card" style="background-color: ${surfaceColor}; border: 1px solid #dbdbdb; border-radius: 8px; margin-bottom: 24px;">
                  
                  <!-- Post Header -->
                  <div style="padding: 14px 4px 14px 16px; display: flex; align-items: center; justify-content: space-between;">
                    <div style="display: flex; align-items: center; gap: 12px;">
                      <div style="width: 32px; height: 32px; border-radius: 50%; background: ${post.gradient}; border: 2px solid transparent; background-clip: padding-box; display: flex; align-items: center; justify-content: center; font-size: ${baseSize * 1.3}px; cursor: pointer;">
                        ${post.avatar}
                      </div>
                      <div>
                        <div style="display: flex; align-items: center; gap: 4px;">
                          <span style="font-weight: 600; font-size: ${baseSize}px; color: ${textColor}; cursor: pointer;">${post.author}</span>
                          ${post.location ? `
                            <span style="color: #8e8e8e; font-size: ${baseSize}px;">‚Ä¢</span>
                            <span style="color: #8e8e8e; font-size: ${baseSize}px;">${post.location}</span>
                          ` : ''}
                        </div>
                      </div>
                    </div>
                    <button class="icon-button" style="background: none; border: none; cursor: pointer; padding: 8px;">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="${textColor}">
                        <circle cx="12" cy="12" r="1.5"></circle>
                        <circle cx="12" cy="6" r="1.5"></circle>
                        <circle cx="12" cy="18" r="1.5"></circle>
                      </svg>
                    </button>
                  </div>

                  <!-- Haiku Image -->
                  <div style="background: ${post.gradient}; padding: 60px 32px; display: flex; align-items: center; justify-content: flex-end; min-height: 450px; position: relative; width: 100%;">
                    <div style="writing-mode: vertical-rl; display: flex; gap: 32px; padding-right: 48px;">
                      ${post.haikuLines.map((line, idx) => `
                        <div style="font-size: ${baseSize * 2.4}px; color: white; font-weight: 500; text-shadow: 0 2px 16px rgba(0,0,0,0.5), 0 4px 24px rgba(0,0,0,0.3); line-height: 1.6; display: flex; flex-direction: column; align-items: center;">
                          ${line.split('').map(char => `<span style="display: block;">${char}</span>`).join('')}
                        </div>
                      `).join('')}
                    </div>
                  </div>

                  <!-- Post Actions -->
                  <div style="padding: 6px 16px;">
                    <div style="display: flex; align-items: center; justify-content: space-between;">
                      <div style="display: flex; gap: 16px;">
                        <button class="like-button icon-button" onclick="toggleLike(${post.id})" style="background: none; border: none; cursor: pointer; padding: 8px 0;">
                          <svg width="24" height="24" viewBox="0 0 24 24" fill="${likedPosts.has(post.id) ? '#ed4956' : 'none'}" stroke="${likedPosts.has(post.id) ? '#ed4956' : textColor}" stroke-width="2">
                            <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
                          </svg>
                        </button>
                        <button class="icon-button" style="background: none; border: none; cursor: pointer; padding: 8px 0;">
                          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="${textColor}" stroke-width="2">
                            <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                          </svg>
                        </button>
                        <button class="icon-button" style="background: none; border: none; cursor: pointer; padding: 8px 0;">
                          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="${textColor}" stroke-width="2">
                            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"></path>
                          </svg>
                        </button>
                      </div>
                      <button class="icon-button" onclick="toggleSave(${post.id})" style="background: none; border: none; cursor: pointer; padding: 8px 0;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="${savedPosts.has(post.id) ? textColor : 'none'}" stroke="${textColor}" stroke-width="2">
                          <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path>
                        </svg>
                      </button>
                    </div>
                  </div>

                  <!-- Likes Count -->
                  <div style="padding: 0 16px 8px;">
                    <span style="font-weight: 600; font-size: ${baseSize}px; color: ${textColor};">
                      ${post.likes.toLocaleString()} „ÅÑ„ÅÑ„Å≠
                    </span>
                  </div>

                  <!-- Caption -->
                  <div style="padding: 0 16px;">
                    <div style="font-size: ${baseSize}px; color: ${textColor}; line-height: 18px;">
                      <span style="font-weight: 600; margin-right: 6px;">${post.author}</span>
                      <span>${post.caption}</span>
                    </div>
                  </div>

                  <!-- View Comments -->
                  <div style="padding: 4px 16px;">
                    <button style="background: none; border: none; cursor: pointer; padding: 0; color: #8e8e8e; font-size: ${baseSize}px;">
                      „Ç≥„É°„É≥„Éà${post.comments}‰ª∂„Çí„Åô„Åπ„Å¶Ë°®Á§∫
                    </button>
                  </div>

                  <!-- Timestamp -->
                  <div style="padding: 4px 16px 16px;">
                    <span style="font-size: ${baseSize * 0.75}px; color: #8e8e8e; text-transform: uppercase; letter-spacing: 0.2px;">
                      ${post.timestamp}
                    </span>
                  </div>

                  <!-- Add Comment -->
                  <div style="border-top: 1px solid #efefef; padding: 6px 16px; display: flex; align-items: center; gap: 8px;">
                    <button class="icon-button" style="background: none; border: none; cursor: pointer; padding: 8px 0;">
                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="${textColor}" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <path d="M8 14s1.5 2 4 2 4-2 4-2M9 9h.01M15 9h.01"></path>
                      </svg>
                    </button>
                    <input type="text" placeholder="„Ç≥„É°„É≥„Éà„ÇíËøΩÂä†..." style="border: none; outline: none; flex: 1; font-size: ${baseSize}px; color: ${textColor};" />
                    <button style="background: none; border: none; cursor: pointer; padding: 8px 0; color: ${primaryColor}; font-weight: 600; font-size: ${baseSize}px; opacity: 0.3;">
                      ÊäïÁ®ø
                    </button>
                  </div>
                </article>
              `).join('')}
            </main>

            <!-- Sidebar -->
            <aside style="position: sticky; top: 90px; height: fit-content;">
              
              <!-- User Profile -->
              <div style="display: flex; align-items: center; gap: 12px; padding: 20px 0 24px;">
                <div style="width: 56px; height: 56px; border-radius: 50%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); display: flex; align-items: center; justify-content: center; font-size: ${baseSize * 2}px; cursor: pointer;">
                  üé®
                </div>
                <div style="flex: 1;">
                  <div style="font-weight: 600; font-size: ${baseSize}px; color: ${textColor}; cursor: pointer;">haiku_lover</div>
                  <div style="font-size: ${baseSize}px; color: #8e8e8e;">‰ø≥Âè•ÊÑõÂ•ΩÂÆ∂</div>
                </div>
                <button style="background: none; border: none; cursor: pointer; color: ${primaryColor}; font-weight: 600; font-size: ${baseSize * 0.85}px;">
                  Âàá„ÇäÊõø„Åà
                </button>
              </div>

              <!-- Suggestions -->
              <div style="margin-bottom: 24px;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px;">
                  <span style="font-weight: 600; font-size: ${baseSize}px; color: #8e8e8e;">${leaderboardTitle}</span>
                  <button style="background: none; border: none; cursor: pointer; color: ${textColor}; font-weight: 600; font-size: ${baseSize * 0.85}px;">
                    „Åô„Åπ„Å¶Ë¶ã„Çã
                  </button>
                </div>

                <div style="display: flex; flex-direction: column; gap: 12px;">
                  ${sortedPosts.slice(0, 5).map((post, index) => `
                    <div class="leaderboard-item" style="display: flex; align-items: center; gap: 12px; padding: 8px; border-radius: 8px; transition: background-color 0.2s;">
                      <div style="position: relative;">
                        <div style="width: 44px; height: 44px; border-radius: 50%; background: ${post.gradient}; display: flex; align-items: center; justify-content: center; font-size: ${baseSize * 1.5}px; cursor: pointer;">
                          ${post.avatar}
                        </div>
                        ${index < 3 ? `
                          <div style="position: absolute; bottom: -2px; right: -2px; width: 20px; height: 20px; border-radius: 50%; background-color: ${surfaceColor}; display: flex; align-items: center; justify-content: center; font-size: ${baseSize * 0.9}px;">
                            ${index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : 'ü•â'}
                          </div>
                        ` : ''}
                      </div>
                      
                      <div style="flex: 1; min-width: 0;">
                        <div style="font-weight: 600; font-size: ${baseSize}px; color: ${textColor}; cursor: pointer; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                          ${post.author}
                        </div>
                        <div style="font-size: ${baseSize * 0.85}px; color: #8e8e8e; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                          ${post.displayName}
                        </div>
                      </div>
                      
                      <button style="background: none; border: none; cursor: pointer; color: ${primaryColor}; font-weight: 600; font-size: ${baseSize * 0.85}px;">
                        „Éï„Ç©„É≠„Éº
                      </button>
                    </div>
                  `).join('')}
                </div>
              </div>

              <!-- Footer -->
              <div style="padding: 24px 0;">
                <div style="font-size: ${baseSize * 0.85}px; color: #c7c7c7; line-height: 16px;">
                  <div style="margin-bottom: 16px;">
                    <a href="#" style="color: #c7c7c7; text-decoration: none; margin-right: 8px;">Ê¶ÇË¶Å</a>
                    <a href="#" style="color: #c7c7c7; text-decoration: none; margin-right: 8px;">„Éò„É´„Éó</a>
                    <a href="#" style="color: #c7c7c7; text-decoration: none; margin-right: 8px;">„Éó„É¨„Çπ</a>
                    <a href="#" style="color: #c7c7c7; text-decoration: none; margin-right: 8px;">API</a>
                  </div>
                  <div style="margin-bottom: 16px;">
                    <a href="#" style="color: #c7c7c7; text-decoration: none; margin-right: 8px;">Êé°Áî®ÊÉÖÂ†±</a>
                    <a href="#" style="color: #c7c7c7; text-decoration: none; margin-right: 8px;">„Éó„É©„Ç§„Éê„Ç∑„Éº</a>
                    <a href="#" style="color: #c7c7c7; text-decoration: none; margin-right: 8px;">Âà©Áî®Ë¶èÁ¥Ñ</a>
                  </div>
                  <div style="color: #c7c7c7;">¬© 2024 ‰ø≥Âè•„Ç∞„É©„É†</div>
                </div>
              </div>
            </aside>
          </div>
        </div>
      `;
    }

    async function onConfigChange(newConfig) {
      Object.assign(config, newConfig);
      renderApp();
    }

    window.toggleLike = toggleLike;
    window.toggleSave = toggleSave;

    const element = {
      defaultConfig,
      onConfigChange,
      mapToCapabilities: (config) => ({
        recolorables: [
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (value) => {
              config.background_color = value;
              window.elementSdk.setConfig({ background_color: value });
            }
          },
          {
            get: () => config.surface_color || defaultConfig.surface_color,
            set: (value) => {
              config.surface_color = value;
              window.elementSdk.setConfig({ surface_color: value });
            }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => {
              config.text_color = value;
              window.elementSdk.setConfig({ text_color: value });
            }
          },
          {
            get: () => config.primary_action_color || defaultConfig.primary_action_color,
            set: (value) => {
              config.primary_action_color = value;
              window.elementSdk.setConfig({ primary_action_color: value });
            }
          },
          {
            get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
            set: (value) => {
              config.secondary_action_color = value;
              window.elementSdk.setConfig({ secondary_action_color: value });
            }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || defaultConfig.font_family,
          set: (value) => {
            config.font_family = value;
            window.elementSdk.setConfig({ font_family: value });
          }
        },
        fontSizeable: {
          get: () => config.font_size || defaultConfig.font_size,
          set: (value) => {
            config.font_size = value;
            window.elementSdk.setConfig({ font_size: value });
          }
        }
      }),
      mapToEditPanelValues: (config) => new Map([
        ["site_title", config.site_title || defaultConfig.site_title],
        ["leaderboard_title", config.leaderboard_title || defaultConfig.leaderboard_title]
      ])
    };

    window.elementSdk?.init(element);
    renderApp();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9afc62f3f15abea7',t:'MTc2NjAzNzA2Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
<!doctype html>
<html lang="ja" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>‰ø≥Âè•„Ç∞„É©„É† - Haiku</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { box-sizing: border-box; overflow: hidden; }
    .post-card { transition: box-shadow .15s; }
    .post-card:hover { box-shadow: 0 4px 20px rgba(0,0,0,.08); }
    .icon-button:hover { opacity: .6; }
    .like-button:active { transform: scale(.85); }

    /* Scroll only center column */
    .layout { height: calc(100vh - 60px); }
    .center-feed { overflow-y: auto; padding-right: 6px; }
    .center-feed::-webkit-scrollbar { width: 6px; }
    .center-feed::-webkit-scrollbar-thumb { background: #ccc; border-radius: 6px; }
  </style>
</head>
<body class="bg-[#fafafa]">
<div id="app"></div>

<script>
/* ================= CONFIG ================= */
const defaultConfig = {
  background_color: "#fafafa",
  surface_color: "#ffffff",
  text_color: "#262626",
  primary_action_color: "#0095f6",
  font_family: "-apple-system",
  font_size: 14,
  site_title: "‰ø≥Âè•„Ç∞„É©„É†"
};

let config = { ...defaultConfig };

/* ================= DATA ================= */
const haikuPosts = [
  ...Array.from({ length: 20 }).map((_, i) => ({
    id: i + 1,
    author: `haiku_user_${i + 1}`,
    avatar: ['üå∏','üéã','‚ùÑÔ∏è','üçÉ','üåä'][i % 5],
    location: ['‰∫¨ÈÉΩ','ÁÆ±Ê†π','Êú≠Âπå','Èï∑Èáé','Ê≤ñÁ∏Ñ'][i % 5],
    haikuLines: [
      ['Ê°ú„ÅÆËä±','Êò•È¢®„Å´Ëàû„ÅÑ','Êò•„ÅåÊù•„Åü'],
      ['Ê∫ÄÊúàÂÖâ','Êπñ„Å´Êò†„Çä','Â§úÈùô„Åã'],
      ['Èõ™„Åó„Çì„Åó„Çì','Ë°óÁÅØ„ÅÆ‰∏ã','Èü≥Ê∂à„ÇÜ'],
      ['Â±±„ÅÆÈÅì','È¢®„Åå„Éö„Éº„Ç∏„Çí','„ÇÅ„Åè„Çä„ÇÜ„Åè'],
      ['Èùí„ÅçÊµ∑','Ë≤ùÊÆª„Å≤„Å®„Å§','Â§èÂßã„Åæ„Çã']
    ][i % 5],
    caption: 'Êó•Â∏∏„ÅÆ‰∏ÄÁû¨„Çí‰ø≥Âè•„Å´„Åó„Åæ„Åó„Åü ‚ú®',
    likes: Math.floor(Math.random() * 500) + 50,
    time: `${i + 1}ÊôÇÈñìÂâç`,
    gradient: [
      'linear-gradient(135deg,#667eea,#764ba2)',
      'linear-gradient(135deg,#f093fb,#f5576c)',
      'linear-gradient(135deg,#a1c4fd,#c2e9fb)',
      'linear-gradient(135deg,#d4fc79,#96e6a1)',
      'linear-gradient(135deg,#89f7fe,#66a6ff)'
    ][i % 5]
  })),
  {
    id: 1,
    author: "shizen_shi",
    avatar: "üå∏",
    location: "‰∫¨ÈÉΩ",
    haikuLines: ["Ê°ú„ÅÆËä±","Êò•È¢®„Å´Ëàû„ÅÑËêΩ„Å°„Å¶","Êò•„ÅåÊù•„Åü"],
    caption: "Êò•„ÅåË®™„Çå„ÄÅÊ°ú„ÅÆËä±„Å≥„Çâ„ÅåÈ¢®„Å´Ëàû„ÅÜÁæé„Åó„ÅÑÂ≠£ÁØÄ„Åß„Åô üå∏",
    likes: 234,
    time: "2ÊôÇÈñìÂâç",
    gradient: "linear-gradient(135deg,#667eea,#764ba2)"
  },
  {
    id: 2,
    author: "tsuki_akari",
    avatar: "üéã",
    location: "ÁÆ±Ê†π",
    haikuLines: ["Ê∫ÄÊúàÂÖâ","Èùô„Åã„Å™Êπñ„Å´Êò†„Çä","Â§ú„ÅØÈùô„Åã"],
    caption: "Ê∫ÄÊúà„ÅÆÂÖâ„ÅåÈùô„Åã„Å™ÊπñÈù¢„Å´Êò†„ÇãÂ§ú üåô",
    likes: 189,
    time: "5ÊôÇÈñìÂâç",
    gradient: "linear-gradient(135deg,#f093fb,#f5576c)"
  },
  {
    id: 3,
    author: "yuki_no_uta",
    avatar: "‚ùÑÔ∏è",
    location: "Êú≠Âπå",
    haikuLines: ["Èõ™„Åó„Çì„Åó„Çì","Ë°óÁÅØ„ÅÆ‰∏ã„Å´","Ë∂≥Èü≥Ê∂à„ÇÜ"],
    caption: "Èùô„Åã„Å™Èõ™„ÅÆÂ§ú„ÄÅÈü≥„Åæ„ÅßÁôΩ„Åè„Å™„Çã ‚ùÑÔ∏è",
    likes: 321,
    time: "1Êó•Ââç",
    gradient: "linear-gradient(135deg,#a1c4fd,#c2e9fb)"
  },
  {
    id: 4,
    author: "kaze_no_michi",
    avatar: "üçÉ",
    location: "Èï∑Èáé",
    haikuLines: ["Â±±„ÅÆÈÅì","È¢®„Åå„Éö„Éº„Ç∏„Çí","„ÇÅ„Åè„Çä„ÇÜ„Åè"],
    caption: "Â±±ÈÅì„ÅßÊÑü„Åò„Åü„ÄÅËá™ÁÑ∂„ÅÆÂëºÂê∏ üçÉ",
    likes: 156,
    time: "2Êó•Ââç",
    gradient: "linear-gradient(135deg,#d4fc79,#96e6a1)"
  },
  {
    id: 5,
    author: "umi_hibiki",
    avatar: "üåä",
    location: "Ê≤ñÁ∏Ñ",
    haikuLines: ["Èùí„ÅçÊµ∑","Ë≤ùÊÆª„Å≤„Å®„Å§","Â§èÂßã„Åæ„Çã"],
    caption: "Â§è„ÅÆÂßã„Åæ„Çä„ÇíÂëä„Åí„ÇãÊµ∑„ÅÆÈü≥ üåä",
    likes: 278,
    time: "3Êó•Ââç",
    gradient: "linear-gradient(135deg,#89f7fe,#66a6ff)"
  }
];

let liked = new Set();

/* ================= ACTIONS ================= */
function toggleLike(id) {
  const p = haikuPosts.find(x => x.id === id);
  if (!p) return;
  liked.has(id) ? (liked.delete(id), p.likes--) : (liked.add(id), p.likes++);
  render();
}

/* ================= RENDER ================= */
function render() {
  const b = config.font_size;
  document.getElementById('app').innerHTML = `
  <div style="font-family:${config.font_family};color:${config.text_color}">

    <!-- HEADER -->
    <header style="background:${config.surface_color};border-bottom:1px solid #dbdbdb;position:sticky;top:0;z-index:10">
      <div style="max-width:975px;margin:auto;padding:10px 20px;display:flex;align-items:center;justify-content:space-between">
        <div style="font-size:${b*1.8}px;font-weight:600;letter-spacing:1px">‰ø≥Âè•„Ç∞„É©„É†</div>
        <div style="flex:1;display:flex;justify-content:center">
          <div style="background:#efefef;border-radius:8px;padding:6px 12px;min-width:220px;display:flex;align-items:center;gap:6px;color:#8e8e8e">
            üîç <span style="font-size:${b}px">Ê§úÁ¥¢</span>
          </div>
        </div>
        <div style="display:flex;gap:22px;align-items:center">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#262626" stroke-width="2"><path d="M3 9.5L12 3l9 6.5"/><path d="M5 10v10h5v-6h4v6h5V10"/></svg>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#262626" stroke-width="2"><path d="M22 2L11 13"/><path d="M22 2l-7 20-4-9-9-4z"/></svg>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#262626" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="4"/><line x1="12" y1="8" x2="12" y2="16"/><line x1="8" y1="12" x2="16" y2="12"/></svg>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#262626" stroke-width="2"><polygon points="13 2 3 14 12 12 11 22 21 10 12 12"/></svg>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#262626" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78L12 21.23l7.78-7.78a5.5 5.5 0 0 0 0-7.78z"/></svg>
          <div style="width:26px;height:26px;border-radius:50%;background:linear-gradient(135deg,#fdc468,#df4996);display:flex;align-items:center;justify-content:center;color:white;font-size:14px">A</div>
        </div>
      </div>
    </header>

    <main class="layout" style="max-width:975px;margin:0 auto;display:flex;gap:32px;padding-top:24px">
      <aside style="flex:1">
        <div style="background:${config.surface_color};border:1px solid #dbdbdb;border-radius:8px;padding:16px">
          <h3 style="font-weight:600;margin-bottom:12px">üèÜ „É©„É≥„Ç≠„É≥„Ç∞Ôºà„ÅÑ„ÅÑ„Å≠È†ÜÔºâ</h3>
          <div style="display:flex;flex-direction:column;gap:16px">
            ${[...haikuPosts].sort((a,b)=>b.likes-a.likes).map((p,i)=>`
              <div style="border:1px solid #eee;border-radius:6px;overflow:hidden">
                <div style="background:${p.gradient};height:120px;position:relative">
                  <div style="position:absolute;top:8px;left:8px;background:rgba(0,0,0,.5);color:white;font-size:12px;padding:2px 6px;border-radius:4px">#${i+1}</div>
                  <div style="position:absolute;top:12px;right:12px;display:flex;gap:10px">
                    ${p.haikuLines.map(line=>`
                      <div style="writing-mode:vertical-rl;text-orientation:upright;font-size:14px;color:white;letter-spacing:3px">${line}</div>
                    `).join('')}
                  </div>
                </div>
                <div style="padding:10px;font-size:13px">
                  <b>${p.author}</b><br>
                  ‚ù§Ô∏è ${p.likes} „ÅÑ„ÅÑ„Å≠
                </div>
              </div>
            `).join('')}
          </div>
        </div>
      </aside>

      <section class="center-feed" style="flex:2;max-width:630px">
        ${haikuPosts.map(p=>`
        <article class="post-card" style="background:${config.surface_color};border:1px solid #dbdbdb;border-radius:8px;margin-bottom:24px">
          <div style="display:flex;align-items:center;gap:12px;padding:14px">
            <div style="width:32px;height:32px;border-radius:50%;background:${p.gradient};display:flex;align-items:center;justify-content:center">${p.avatar}</div>
            <div>
              <div style="font-weight:600">${p.author}</div>
              <div style="font-size:${b*.85}px;color:#8e8e8e">${p.location}</div>
            </div>
          </div>
          <div style="position:relative;background:${p.gradient};min-height:340px;overflow:hidden">
            <div style="position:absolute;top:48px;right:32px;display:flex;gap:28px;transform:rotate(6deg)">
              ${p.haikuLines.map(line=>`
                <div style="writing-mode:vertical-rl;text-orientation:upright;font-size:${b*1.7}px;color:white;letter-spacing:6px;line-height:1.5;text-shadow:0 3px 18px rgba(0,0,0,.45)">${line}</div>
              `).join('')}
            </div>
          </div>
          <div style="padding:12px 16px">
            <button class="like-button icon-button" onclick="toggleLike(${p.id})" style="background:none;border:none">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="${liked.has(p.id)?'#ed4956':'none'}" stroke="${liked.has(p.id)?'#ed4956':config.text_color}" stroke-width="2"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78L12 21.23l7.78-7.78a5.5 5.5 0 0 0 0-7.78z" /></svg>
            </button>
          </div>
          <div style="padding:0 16px 16px">
            <div style="font-weight:600">${p.likes} „ÅÑ„ÅÑ„Å≠</div>
            <div style="margin-top:4px"><b>${p.author}</b> ${p.caption}</div>
            <div style="font-size:${b*.8}px;color:#8e8e8e;margin-top:6px">${p.time}</div>
          </div>
        </article>
        `).join('')}
      </section>

      <aside style="flex:1">
        <div style="background:${config.surface_color};border:1px solid #dbdbdb;border-radius:8px;padding:16px">
          <h3 style="font-weight:600;margin-bottom:12px">üë• „Éï„Ç©„É≠„Éº</h3>
          <div style="display:flex;flex-direction:column;gap:12px">
            ${haikuPosts.map(p=>`
              <div style="display:flex;align-items:center;justify-content:space-between">
                <div style="display:flex;align-items:center;gap:10px">
                  <div style="width:28px;height:28px;border-radius:50%;background:${p.gradient};display:flex;align-items:center;justify-content:center">${p.avatar}</div>
                  <span>${p.author}</span>
                </div>
                <button style="background:none;border:none;color:${config.primary_action_color};font-weight:600;cursor:pointer">„Éï„Ç©„É≠„Éº</button>
              </div>
            `).join('')}
          </div>
        </div>
      </aside>
    </main>
  </div>`;
}

render();
</script>
</body>
</html>
